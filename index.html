<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LeoBot: Il Maestro di Vigevano üè∞</title>

  <style>
    :root{
      --bg-sunny: #fff9c4;
      --ink: #37474f;
      --card-bg: #fffffffa;
      --accent-red: #ff7043;
      --accent-blue: #42a5f5;
      --accent-green: #66bb6a;
      --shadow: 0 10px 25px rgba(0,0,0,0.1);
      --radius: 20px;
      --font: "Comic Sans MS","Chalkboard SE","Segoe UI Emoji",sans-serif;
    }

    *{ box-sizing:border-box }

    body{
      margin:0;
      font-family:var(--font);
      color:var(--ink);
      background:linear-gradient(135deg,var(--bg-sunny) 0%,#81d4fa 100%);
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    header{
      padding:10px;
      text-align:center;
    }

    .brand{
      display:inline-flex;
      align-items:center;
      gap:15px;
      background:#fff;
      padding:8px 25px;
      border-radius:50px;
      box-shadow:0 5px 0 rgba(0,0,0,0.1);
      border:3px solid var(--accent-blue);
    }

    .brand img{
      width:50px;
      height:50px;
      border-radius:50%;
      border:2px solid var(--accent-red);
      object-fit:cover;
    }

    .brand h1{
      margin:0;
      font-size:24px;
      color:var(--accent-red);
    }

    main{
      flex:1;
      width:95%;
      max-width:1400px;
      margin:0 auto;
      padding-bottom:30px;
    }

    .container{
      display:grid;
      grid-template-columns: 1fr 280px 460px;
      gap:30px;
      align-items:end;
    }

    .info-panel{
      background:var(--card-bg);
      padding:20px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      border:3px dashed var(--accent-blue);
    }

    .welcome-text h2{
      margin-top:0;
      color:var(--accent-blue);
      font-size:24px;
    }
    
    .welcome-text p {
      font-size: 15px;
      line-height: 1.4;
    }

    .photo-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
      gap:10px;
      margin-top:20px;
    }

    .polaroid{
      background:#fff;
      padding:6px 6px 25px;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
      transform:rotate(-2deg);
      transition:0.3s;
      text-align:center;
    }

    /* Stile speciale per l'immagine generata */
    .polaroid.dynamic {
      border: 2px solid var(--accent-green);
      transform: rotate(2deg);
    }

    .polaroid:hover{
      transform:scale(1.05) rotate(0deg);
    }

    .polaroid img{
      width:100%;
      height:110px;
      object-fit:cover;
    }

    .caption{
      margin-top:8px;
      font-weight:bold;
      font-size: 14px;
    }

    .refresh-btn {
      background: var(--accent-green);
      color: white;
      border: none;
      border-radius: 5px;
      padding: 4px 8px;
      cursor: pointer;
      font-size: 10px;
      margin-top: 5px;
    }

    .leo-column{
      position:relative;
      display:flex;
      justify-content:center;
      align-items:flex-end;
    }

    .leo-mascot{
      max-height:470px;
      width:auto;
      filter:drop-shadow(-6px 6px 10px rgba(0,0,0,0.25));
      pointer-events:none;
    }

    .chat-bubble-tip{
      position:absolute;
      top:60px;
      right:10px;
      background:#fff;
      padding:8px 16px;
      border-radius:30px;
      border:2px solid var(--ink);
      font-weight:bold;
      white-space:nowrap;
      box-shadow:3px 3px 0 rgba(0,0,0,0.1);
      z-index: 10;
      animation:float 3s ease-in-out infinite;
    }

    .chat-bubble-tip::after{
      content:"";
      position:absolute;
      right:-8px;
      top:50%;
      transform:translateY(-50%);
      border-width:8px 0 8px 8px;
      border-style:solid;
      border-color:transparent transparent transparent #fff;
    }
    
    .chat-bubble-tip::before {
      content:"";
      position:absolute;
      right:-11px;
      top:50%;
      transform:translateY(-50%);
      border-width:8px 0 8px 8px;
      border-style:solid;
      border-color:transparent transparent transparent var(--ink);
      z-index: -1;
    }

    @keyframes float{
      0%,100%{ transform:translateY(0); }
      50%{ transform:translateY(-8px); }
    }

    .chat-column{
      background:#fff;
      padding:10px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      border:4px solid var(--accent-green);
      height:660px;
    }

    iframe{
      width:100%;
      height:100%;
      border-radius:14px;
      border:2px solid #eee;
    }

    .mirror-section{
      background:#fff;
      margin-top:30px;
      padding:20px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      border:3px solid var(--accent-red);
      text-align:center;
    }

    .mirror-box{
      display:flex;
      gap:15px;
      justify-content:center;
      margin-top:15px;
      flex-wrap:wrap;
    }

    .mirror-input,
    .mirror-output{
      font-family:'Brush Script MT',cursive;
      font-size:24px;
      padding:10px;
      width:250px;
      border-radius:10px;
      border:2px dashed #aaa;
    }

    .mirror-output{
      background:#f0f0f0;
      color:var(--accent-blue);
      transform:scaleX(-1);
    }

    footer{
      text-align:center;
      padding:15px;
      font-weight:bold;
      color:#555;
    }

    @media (max-width:1100px){
      .container{ grid-template-columns:1fr; }
      .leo-column{ display:none; }
      .chat-column{ height:550px; }
    }
  </style>
</head>

<body>

<header>
  <div class="brand">
    <img src="images/logo.png" alt="Leo Avatar">
    <h1>LeoBot: Guida di Vigevano</h1>
  </div>
</header>

<main>
  <div class="container">
    <div class="info-panel">
      <div class="welcome-text">
        <h2>Benvenuti nel Rinascimento! üé®</h2>
        <p>Ciao bambini! Sono <strong>Leonardo da Vinci</strong>.<br>Scoprite i luoghi di <strong>Vigevano</strong> dove ho lavorato.</p>
        <p>üëâ Usate la chat qui a fianco per farmi domande!</p>
      </div>

      <div class="photo-grid">
        <div class="polaroid dynamic">
          <img id="aiImage" src="images/aigenerated.png" alt="Disegno di Leo">
          <div class="caption">Il mio ultimo schizzo</div>
          <button class="refresh-btn" onclick="refreshImage()">üîÑ Aggiorna</button>
        </div>

        <div class="polaroid">
          <img src="images/vigevano_piazza.jpeg">
          <div class="caption">Piazza Ducale</div>
        </div>
        <div class="polaroid">
          <img src="images/vigevano_torre.jpeg">
          <div class="caption">Torre del Castello</div>
        </div>
      </div>
    </div>

    <div class="leo-column">
      <img src="images/leonardo_fullbody.png" class="leo-mascot" alt="Leonardo">
      <div class="chat-bubble-tip">Scrivi qui sotto! üëá</div>
    </div>

    <div class="chat-column">
      <iframe src="https://interfaces.zapier.com/embed/chatbot/cmkky7da7006mqe6bgw1t1ox2" allow="clipboard-write *" title="LeoBot"></iframe>
    </div>
  </div>

  <div class="mirror-section">
    <h2>‚úçÔ∏è Il Laboratorio Segreto</h2>
    <p>Scrivi il tuo nome e leggilo al contrario!</p>
    <div class="mirror-box">
      <input class="mirror-input" id="inputText" oninput="mirrorText()" placeholder="Scrivi qui...">
      <div class="mirror-output" id="outputText">...iuq ivircS</div>
    </div>
  </div>
</main>

<footer>üè∞ Progetto Didattico - Scuola Primaria - Vigevano</footer>

<script>
  function mirrorText(){
    const input = document.getElementById("inputText").value;
    document.getElementById("outputText").innerText = input === "" ? "...iuq ivircS" : input;
  }

  // FUNZIONE PER AGGIORNARE L'IMMAGINE
  function refreshImage() {
    const img = document.getElementById('aiImage');
    // Aggiungo un parametro timestamp per forzare il browser a ignorare la cache
    img.src = "images/aigenerated.png?t=" + new Date().getTime();
  }

  // AGGIORNAMENTO AUTOMATICO OGNI 5 SECONDI
  setInterval(refreshImage, 5000);
</script>

</body>
</html>
