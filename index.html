<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LeoBot: Il Maestro di Vigevano üè∞</title>

  <style>
    :root{
      --bg-sunny: #fff9c4;
      --ink: #37474f;
      --card-bg: #fffffffa;
      --accent-red: #ff7043;
      --accent-blue: #42a5f5;
      --accent-green: #66bb6a;
      --shadow: 0 10px 25px rgba(0,0,0,0.1);
      --radius: 20px;
      --font: "Comic Sans MS","Chalkboard SE","Segoe UI Emoji",sans-serif;
    }

    *{ box-sizing:border-box }

    body{
      margin:0;
      font-family:var(--font);
      color:var(--ink);
      background:linear-gradient(135deg,var(--bg-sunny) 0%,#81d4fa 100%);
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    /* HEADER */
    header{
      padding:10px;
      text-align:center;
    }

    .brand{
      display:inline-flex;
      align-items:center;
      gap:15px;
      background:#fff;
      padding:8px 25px;
      border-radius:50px;
      box-shadow:0 5px 0 rgba(0,0,0,0.1);
      border:3px solid var(--accent-blue);
    }

    .brand img{
      width:50px;
      height:50px;
      border-radius:50%;
      border:2px solid var(--accent-red);
      object-fit:cover;
    }

    .brand h1{
      margin:0;
      font-size:24px;
      color:var(--accent-red);
    }

    /* MAIN */
    main{
      flex:1;
      width:95%;
      max-width:1400px; /* Aumentato leggermente per accomodare la chat pi√π larga */
      margin:0 auto;
      padding-bottom:30px;
    }

    /* === GRID MODIFICATA === */
    .container{
      display:grid;
      /* 1. Info Panel (si adatta)
         2. Leonardo (ridotto leggermente a 280px)
         3. Chat (aumentata a 460px) 
      */
      grid-template-columns: 1fr 280px 460px;
      gap:30px;
      align-items:end;
    }

    /* INFO PANEL (Ridotto leggermente) */
    .info-panel{
      background:var(--card-bg);
      padding:20px; /* Ridotto da 25px */
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      border:3px dashed var(--accent-blue);
    }

    .welcome-text h2{
      margin-top:0;
      color:var(--accent-blue);
      font-size:24px; /* Ridotto da 28px */
    }
    
    .welcome-text p {
      font-size: 15px; /* Testo leggermente pi√π compatto */
      line-height: 1.4;
    }

    .photo-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); /* Minimo ridotto per flessibilit√† */
      gap:10px;
      margin-top:20px;
    }

    .polaroid{
      background:#fff;
      padding:6px 6px 25px;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
      transform:rotate(-2deg);
      transition:0.3s;
      text-align:center;
    }

    .polaroid:hover{
      transform:scale(1.05) rotate(0deg);
    }

    .polaroid img{
      width:100%;
      height:110px; /* Foto leggermente pi√π basse */
      object-fit:cover;
    }

    .caption{
      margin-top:8px;
      font-weight:bold;
      font-size: 14px;
    }

    /* === COLONNA LEONARDO === */
    .leo-column{
      position:relative;
      display:flex;
      justify-content:center;
      align-items:flex-end;
    }

    .leo-mascot{
      max-height:470px; /* Ridotto da 520px (leggermente) */
      width:auto;
      filter:drop-shadow(-6px 6px 10px rgba(0,0,0,0.25));
      pointer-events:none;
    }

    /* BUBBLE CORRETTA (Non copre pi√π la chat) */
    .chat-bubble-tip{
      position:absolute;
      top:60px;
      right:10px; /* Spostata DENTRO la colonna di Leo */
      transform:none; /* Rimossa la traslazione che la spingeva sulla chat */
      background:#fff;
      padding:8px 16px;
      border-radius:30px;
      border:2px solid var(--ink);
      font-weight:bold;
      white-space:nowrap;
      box-shadow:3px 3px 0 rgba(0,0,0,0.1);
      z-index: 10;
      animation:float 3s ease-in-out infinite;
    }

    /* Freccetta ora punta verso DESTRA (verso la chat) */
    .chat-bubble-tip::after{
      content:"";
      position:absolute;
      right:-8px; /* Posizionata a destra */
      left:auto;  /* Reset left */
      top:50%;
      transform:translateY(-50%);
      border-width:8px 0 8px 8px; /* Triangolo che punta a destra */
      border-style:solid;
      border-color:transparent transparent transparent #fff; /* Colore sul lato sinistro del border */
    }
    
    /* Bordo della freccetta per matchare il contorno (opzionale per perfezione) */
    .chat-bubble-tip::before {
      content:"";
      position:absolute;
      right:-11px;
      top:50%;
      transform:translateY(-50%);
      border-width:8px 0 8px 8px;
      border-style:solid;
      border-color:transparent transparent transparent var(--ink);
      z-index: -1;
    }

    @keyframes float{
      0%,100%{ transform:translateY(0); }
      50%{ transform:translateY(-8px); }
    }

    /* CHAT (Pi√π grande) */
    .chat-column{
      background:#fff;
      padding:10px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      border:4px solid var(--accent-green);
      height:660px; /* Aumentato da 600px */
      /* La larghezza √® gestita dalla Grid (460px) */
    }

    iframe{
      width:100%;
      height:100%;
      border-radius:14px;
      border:2px solid #eee;
    }

    /* SEZIONE GIOCO */
    .mirror-section{
      background:#fff;
      margin-top:30px;
      padding:20px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      border:3px solid var(--accent-red);
      text-align:center;
    }

    .mirror-box{
      display:flex;
      gap:15px;
      justify-content:center;
      margin-top:15px;
      flex-wrap:wrap;
    }

    .mirror-input,
    .mirror-output{
      font-family:'Brush Script MT',cursive;
      font-size:24px;
      padding:10px;
      width:250px;
      border-radius:10px;
      border:2px dashed #aaa;
    }

    .mirror-output{
      background:#f0f0f0;
      color:var(--accent-blue);
      transform:scaleX(-1);
    }

    footer{
      text-align:center;
      padding:15px;
      font-weight:bold;
      color:#555;
    }

    /* RESPONSIVE */
    @media (max-width:1100px){
      .container{
        grid-template-columns:1fr; /* Colonna singola su schermi piccoli */
      }
      .leo-column{
        display:none; /* Nascondi Leo su mobile per spazio */
      }
      .chat-column{
        height:550px;
      }
    }
  </style>
</head>

<body>

<header>
  <div class="brand">
    <img src="images/logo.png" alt="Leo Avatar">
    <h1>LeoBot: Guida di Vigevano</h1>
  </div>
</header>

<main>

  <div class="container">

    <div class="info-panel">
      <div class="welcome-text">
        <h2>Benvenuti nel Rinascimento! üé®</h2>
        <p>
          Ciao bambini! Sono <strong>Leonardo da Vinci</strong>.<br>
          Scoprite i luoghi di <strong>Vigevano</strong> dove ho lavorato.
        </p>
        <p>
          üëâ Usate la chat qui a fianco per farmi domande!
        </p>
      </div>

      <div class="photo-grid">
        <div class="polaroid">
          <img src="images/vigevano_piazza.jpeg">
          <div class="caption">Piazza Ducale</div>
        </div>
        <div class="polaroid">
          <img src="images/vigevano_torre.jpeg">
          <div class="caption">Torre del Castello</div>
        </div>
        <div class="polaroid">
          <img src="images/leonardo_mulini.jpg">
          <div class="caption">Macchine ad acqua</div>
        </div>
      </div>
    </div>

    <div class="leo-column">
      <img src="images/leonardo_fullbody.png" class="leo-mascot" alt="Leonardo">
      <div class="chat-bubble-tip">Scrivi qui sotto! üëá</div>
    </div>

    <div class="chat-column">
      <iframe
        src="https://interfaces.zapier.com/embed/chatbot/cmkky7da7006mqe6bgw1t1ox2"
        allow="clipboard-write *"
        title="LeoBot">
      </iframe>
    </div>

  </div>

  <div class="mirror-section">
    <h2>‚úçÔ∏è Il Laboratorio Segreto</h2>
    <p>Scrivi il tuo nome e leggilo al contrario!</p>
    <div class="mirror-box">
      <input class="mirror-input" id="inputText" oninput="mirrorText()" placeholder="Scrivi qui...">
      <div class="mirror-output" id="outputText">...iuq ivircS</div>
    </div>
  </div>

</main>

<footer>
  üè∞ Progetto Didattico - Scuola Primaria - Vigevano
</footer>

<script>
  function mirrorText(){
    const input = document.getElementById("inputText").value;
    document.getElementById("outputText").innerText =
      input === "" ? "...iuq ivircS" : input;
  }
</script>

</body>
</html>
